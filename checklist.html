<!doctype html>
<html lang="en">
<head>


  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist • DocsApp</title>
  <link rel="stylesheet" href="/style.css" />

  <!-- 1) Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <!-- 2) Your auth helpers: defines requireAuth() -->
  <script defer src="/scripts/auth.js"></script>

  <!-- (optional) Your site script that injects header, etc. -->
  <script defer src="/scripts/app.js"></script>
  
</head>
<body onload="requireAuth()">
  <!-- Shared header gets injected here by /scripts/app.js -->
  <header id="header-holder"></header>

  <main class="container page">
    <!-- Sidebar: same look/markup as Documentation page -->
    <aside id="page-aside" class="aside" aria-label="Sections">
      <h3>Assets</h3>
      <nav class="navlist">
        <a href="#checklist" aria-current="page">Checklist</a>
        <a href="#documentation">Documentation</a>
        <a href="#photos">Site photos</a>
        <a href="#compliance">Compliance</a>
      </nav>
    </aside>

    <!-- Main content -->
    <section class="main">
      <div class="toolbar">
        <input class="input" placeholder="Search tasks…" />
        <button class="button primary">+ New Task</button>
        <span class="button">Client: <strong id="client-badge"></strong></span>
        <button class="button" id="show-aside" title="Show/Hide sections">Toggle Sections</button>
      </div>

      <h1 id="checklist">Checklist</h1>
      <table class="table" role="grid">
        <thead><tr><th>Task</th><th>Assignee</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td>Onboard new hire</td><td>IT</td><td>In Progress</td></tr>
          <tr><td>Server patch cycle</td><td>Ops</td><td>Open</td></tr>
        </tbody>
      </table>

      <h1 id="documentation" style="margin-top:22px">Documentation</h1>
      <p class="muted">Link back to relevant docs for this client.</p>

      <h1 id="photos" style="margin-top:22px">Site photos</h1>
      <p class="muted">Drop photo thumbnails here later.</p>

      <h1 id="compliance" style="margin-top:22px">Compliance</h1>
      <p class="muted">Policy checklists, SOC2 prep, etc.</p>
    </section>
  </main>

  <script>
    // Keep the client badge in sync with the header's client picker
    const badge = document.getElementById('client-badge');
    function paint(){ badge.textContent = getSelectedClient(); }
    window.addEventListener('client:change', paint); paint();

    // Optional: toggle sidebar on small screens using the toolbar button
    document.getElementById('show-aside').addEventListener('click', ()=>{
      const aside = document.getElementById('page-aside');
      if (aside.hasAttribute('hidden')) aside.removeAttribute('hidden');
      else aside.setAttribute('hidden','');
    });
  </script>
</body>
</html>
