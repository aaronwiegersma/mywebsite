<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Log in • Tool Finder</title>
  <meta name="description" content="Log in to your Tool Finder account." />
  <link rel="stylesheet" href="/style.css" />
  <style>
    /* Minimal page-specific styles (works with your existing tokens) */
    .auth-wrap{width:min(520px,92%);margin:2.5rem auto;background:#fff;border:1px solid var(--ring);border-radius:14px;box-shadow:0 10px 28px rgba(0,0,0,.06);padding:1.25rem}
    .auth-wrap h1{margin:.25rem 0 0.25rem;font-size:1.6rem}
    .auth-wrap p.lead{color:var(--muted);margin:0 0 1rem}
    .auth-form{display:grid;gap:.75rem;margin-top:.5rem}
    .row{display:grid;gap:.4rem}
    .row label{font-weight:600}
    .row input{padding:.8rem 1rem;border:1px solid var(--ring);border-radius:12px;font:inherit}
    .btn.primary{display:inline-block;width:100%;text-align:center;padding:.85rem 1rem;border-radius:12px;background:var(--primary);color:#fff;border:1px solid var(--primary);font-weight:700}
    .btn.ghost{display:inline-block;width:100%;text-align:center;padding:.85rem 1rem;border-radius:12px;background:#fff;color:var(--ink);border:1px solid var(--ring);font-weight:700}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:.25rem}
    .swap{background:none;border:none;color:var(--primary);font-weight:700;cursor:pointer}
    .oauth{display:grid;gap:.5rem;margin-top:.75rem}
    .alert{margin:.75rem 0 0;padding:.7rem 1rem;border-radius:10px;font-size:.95rem}
    .alert.error{background:#fef2f2;border:1px solid #fecaca;color:#991b1b}
    .alert.success{background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46}
  </style>
  <!-- Supabase client via CDN -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <!-- Your small auth helper -->
  <script defer src="/scripts/auth.js"></script>
</head>
<body>
  <!-- Header with partial nav -->
  <header>
    <div class="container nav">
      <a href="/index.html" class="logo">⚡ Tool Finder</a>
      <button class="menu-toggle" aria-controls="site-links" aria-expanded="false">☰</button>
      <div id="nav-holder" aria-live="polite"></div>
    </div>
  </header>

  <main class="container">
    <div class="auth-wrap" role="form">
      <h1 id="auth-title">Welcome back</h1>
      <p class="lead">Sign in to continue. Don’t have an account?
        <button id="swap-mode" class="swap" type="button">Create one</button>
      </p>

      <div id="auth-alert" class="alert" style="display:none"></div>

      <form id="auth-form" class="auth-form">
        <div class="row">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" autocomplete="email" required />
        </div>
        <div class="row">
          <label for="password">Password</label>
          <input id="password" name="password" type="password" autocomplete="current-password" required />
        </div>
        <button class="btn primary" type="submit">Sign in</button>
      </form>

      <div class="meta">
        <a href="#" id="reset-link">Forgot password?</a>
      </div>

      <div class="oauth" aria-label="Or continue with">
        <button class="btn ghost" id="google-btn" type="button">Continue with Google</button>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">© <span id="year"></span> Tool Finder</div>
  </footer>

  <script>
    // Load shared nav + highlight active link (same pattern you already use)
    (async () => {
      const holder = document.getElementById('nav-holder');
      try{const r = await fetch('/partials/nav.html',{cache:'no-cache'}); holder.innerHTML = await r.text();}
      catch{holder.innerHTML = '<nav class="links" id="site-links"><a href="/index.html">Home</a><a href="/login.html" aria-current="page">Login</a></nav>';}
      const links = document.getElementById('site-links');
      const btn = document.querySelector('.menu-toggle');
      if(btn && links){ btn.addEventListener('click',()=>{ const open = links.classList.toggle('open'); btn.setAttribute('aria-expanded', String(open)); }); }
      const here = location.pathname.replace(/index\.html$/, '/');
      links?.querySelectorAll('a').forEach(a=>{ const href = new URL(a.href, location.origin).pathname.replace(/index\.html$/, '/'); if(href===here) a.setAttribute('aria-current','page'); });
    })();
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
